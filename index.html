<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Financial Behaviour of Youth ‚Äî Project</title>

    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
      :root {
        --bg-dark: #0d1a26; /* Deep space blue */
        --card-dark: #132332; /* Slightly lighter blue */
        --primary-accent: #00e5ff; /* Glowing Cyan/Electric Blue */
        /* --secondary-accent: #ff4081;  This color is no longer needed */
        --text-light: #e0f7fa;
        --text-muted: #b0bec5;
        --border-color: rgba(0, 229, 255, 0.2);
      }
      body {
        margin: 0;
        font-family: 'Segoe UI', system-ui, Arial, sans-serif;
        background: var(--bg-dark);
        color: var(--text-light);
        background-image:
            linear-gradient(rgba(0, 229, 255, 0.05) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0, 229, 255, 0.05) 1px, transparent 1px);
        background-size: 30px 30px;
      }
      header {
        background: linear-gradient(90deg, #132332, #0d1a26);
        color: white;
        padding: 28px 18px;
        text-align: center;
        border-bottom: 1px solid var(--border-color);
        position: relative;
      }
      header h1 {
        margin: 0;
        font-size: 1.8rem;
        letter-spacing: 0.5px;
        color: var(--primary-accent);
        text-shadow: 0 0 8px rgba(0, 229, 255, 0.5);
      }
      header p {
        margin: 8px 0 0;
        opacity: 0.9;
        color: var(--text-muted);
      }
      nav.tabs {
        display: flex;
        gap: 8px;
        justify-content: center;
        flex-wrap: wrap;
        padding: 14px;
        background: rgba(13, 26, 38, 0.8);
        backdrop-filter: blur(10px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        position: sticky;
        top: 0;
        z-index: 100;
        border-bottom: 1px solid var(--border-color);
      }
      nav.tabs button {
        background: transparent;
        border: 1px solid var(--border-color);
        padding: 9px 14px;
        cursor: pointer;
        border-radius: 8px;
        color: var(--text-light);
        font-weight: 600;
        transition: all 0.2s ease;
      }
      nav.tabs button:hover {
        background: var(--primary-accent);
        color: #0d1a26;
        border-color: var(--primary-accent);
        box-shadow: 0 0 12px rgba(0, 229, 255, 0.5);
      }
      nav.tabs button.active {
        background: var(--primary-accent);
        color: #0d1a26;
        border-color: var(--primary-accent);
        box-shadow: 0 0 18px rgba(0, 229, 255, 0.6);
      }
      .container {
        max-width: 1200px;
        margin: 22px auto;
        padding: 0 14px;
      }
      .card {
        background: var(--card-dark);
        border: 1px solid var(--border-color);
        border-radius: 12px;
        padding: 22px;
        margin-bottom: 22px;
        box-shadow: 0 0 15px rgba(0, 229, 255, 0.07);
      }
      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 18px;
      }
      canvas {
        width: 100% !important;
        height: 340px !important;
        background: transparent;
      }
      .section-title {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 12px;
        color: var(--primary-accent);
      }
      .muted { color: var(--text-muted); font-size: 0.95rem; }
      footer {
        text-align: center;
        margin: 36px 0;
        color: var(--text-muted);
        font-size: 0.9rem;
      }
      .instructions { font-size: 1.05rem; color: var(--text-light); margin-bottom: 18px; line-height: 1.7; }
      .small { font-size: 0.95rem; color: var(--text-muted); line-height: 1.6; }
      h4 { color: var(--text-light); }
      
      /* --- ENHANCEMENTS START HERE --- */
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(15px); }
        to { opacity: 1; transform: translateY(0); }
      }

      section.card {
        animation: fadeIn 0.6s ease-out forwards;
      }

      nav.tabs button:focus-visible {
        outline: 2px solid var(--primary-accent);
        outline-offset: 2px;
        box-shadow: 0 0 12px rgba(0, 229, 255, 0.5);
      }
      
      .print-btn {
        position: absolute;
        top: 20px;
        right: 20px;
        background: transparent;
        border: 1px solid var(--border-color);
        color: var(--text-light);
        padding: 8px 12px;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
      }
      .print-btn:hover {
        background: var(--primary-accent);
        color: var(--bg-dark);
      }

      .chart-insight {
        text-align: center;
        margin-top: 15px;
        padding-top: 15px;
        border-top: 1px solid var(--border-color);
        color: var(--text-muted);
        font-style: italic;
      }

      .highlight-card h2 {
        color: var(--primary-accent);
        margin: 0 0 5px 0;
        font-size: 2.5rem;
      }

      /* Styles for printing */
      @media print {
        body {
          background: white;
          color: black;
          font-family: 'Times New Roman', serif;
        }
        header, nav.tabs, footer, .print-btn {
          display: none;
        }
        .container {
          max-width: 100%;
          margin: 0;
          padding: 0;
        }
        .card {
          box-shadow: none;
          border: 1px solid #ccc;
          page-break-inside: avoid; /* Tries to keep cards from splitting across pages */
          margin-top: 20px;
        }
        h1, h2, h4, .section-title {
          color: black !important;
          text-shadow: none;
        }
        .muted, .small, .instructions, .chart-insight {
          color: #333 !important;
        }
        .grid {
            display: block; /* Stacks charts vertically for printing */
        }
      }
      /* --- ENHANCEMENTS END HERE --- */
    </style>
</head>
<body>

<header>
    <h1>Financial Behaviour of Youth ‚Äî Interactive Report</h1>
    <p>A comprehensive analysis of spending, saving, and investment habits among young adults.</p>
    <p id="totalRespondents" class="muted"></p>
    <button class="print-btn" onclick="window.print()">üñ®Ô∏è Print / Export to PDF</button>
</header>

<nav class="tabs" aria-label="Sections">
    <button class="tab-btn active" data-target="overview" aria-label="View Project Overview">Overview</button>
    <button class="tab-btn" data-target="demographics" aria-label="View Demographics Section">Demographics</button>
    <button class="tab-btn" data-target="income" aria-label="View Income & Savings Section">Income & Savings</button>
    <button class="tab-btn" data-target="spending" aria-label="View Spending Habits Section">Spending Habits</button>
    <button class="tab-btn" data-target="literacy" aria-label="View Financial Literacy Section">Financial Literacy</button>
    <button class="tab-btn" data-target="attitudes" aria-label="View Attitudes & Confidence Section">Attitudes & Confidence</button>
    <button class="tab-btn" data-target="investment" aria-label="View Investment Behaviour Section">Investment Behaviour</button>
    <button class="tab-btn" data-target="indices">FBI Analysis</button>
    <button class="tab-btn" data-target="conclusion" aria-label="View Conclusion Section">Conclusion</button>
</nav>

<div class="container">

    <!-- OVERVIEW SECTION -->
    <section id="overview" class="card">
         <div class="section-title">
            <h2 style="margin:0">Project Overview & Statement of Intent</h2>
        </div>
        
        <div class="card highlight-card" style="border-color: var(--primary-accent);">
            <h4 style="margin-top:0; text-align:center;">Project Highlights at a Glance</h4>
            <div style="display: flex; flex-wrap: wrap; justify-content: space-around; text-align: center; margin-top: 20px;">
                <div style="padding: 10px;">
                    <h2>45%</h2>
                    <p class="muted">Cite "Lack of Knowledge" as a top barrier to investing.</p>
                </div>
                <div style="padding: 10px;">
                    <h2>63%</h2>
                    <p class="muted">Rely on informal sources like Family or Social Media for financial advice.</p>
                </div>
                <div style="padding: 10px;">
                    <h2>71%</h2>
                    <p class="muted">Have never attended a formal financial literacy program.</p>
                </div>
            </div>
        </div>

        <p class="instructions">
            In an era of rapid digital transformation and economic complexity, the financial journey of young adults begins earlier and with higher stakes than ever before. As this digital-native generation steps into a world of instant payments, online investing, and algorithm-driven marketing, their foundational understanding of financial principles is not just an advantage‚Äîit is a necessity. However, a significant gap often exists between their technological fluency and their financial literacy.
        </p>
         <div class="card">
            <h4 style="margin-top:0">Project Intention</h4>
            <p class="small">The primary objective of this project was to move beyond anecdotal evidence and conduct a quantitative analysis of the financial behaviors, attitudes, and awareness levels prevalent among today's youth. We aimed to create a data-driven snapshot that could answer critical questions: How do young people source and manage their income? What are their real-world spending and saving habits? Where are the critical knowledge gaps in their financial literacy, particularly concerning long-term concepts like investment and inflation? By illuminating these patterns, this study intends to provide actionable insights for educators, financial institutions, and policymakers seeking to empower the next generation with sound financial skills.</p>
        </div>
         <div class="card">
            <h4 style="margin-top:0">Methodology & Execution</h4>
            <p class="small">To achieve this, we designed and administered a comprehensive 31-question survey targeting the youth demographic. The survey was structured across five key thematic pillars: Demographics, Income & Savings, Spending Habits, Financial Literacy, and Investment Behaviour. Upon collecting and aggregating the responses, we deliberately chose to innovate beyond traditional static reports. Instead, we have synthesized the findings into this dynamic, interactive web-based dashboard. This platform allows for a more intuitive and engaging exploration of the data, bringing the results to life through responsive visualizations. The following sections present a detailed breakdown of our findings.</p>
        </div>
    </section>

    <!-- DEMOGRAPHICS SECTION -->
    <section id="demographics" class="card" style="display:none">
        <div class="section-title"><h2 style="margin:0">Demographics</h2></div>
        <div class="grid">
            <div class="card"><h4 style="margin-top:0">Age distribution</h4><canvas id="chartAge"></canvas><p class="chart-insight">The largest respondent group is 19-year-olds, indicating a predominantly undergraduate student sample.</p></div>
            <div class="card"><h4 style="margin-top:0">Gender</h4><canvas id="chartGender"></canvas><p class="chart-insight">The survey saw a significantly higher participation rate from male respondents compared to female respondents.</p></div>
            <div class="card"><h4 style="margin-top:0">Education & Employment</h4><canvas id="chartEduEmp"></canvas><p class="chart-insight">The vast majority of participants are still studying, with part-time work being the most common form of employment.</p></div>
        </div>
    </section>

    <!-- INCOME & SAVINGS SECTION -->
    <section id="income" class="card" style="display:none">
        <div class="section-title"><h2 style="margin:0">Income & Savings Behaviour</h2></div>
        <div class="grid">
            <div class="card"><h4 style="margin-top:0">Income source</h4><canvas id="chartIncomeSource"></canvas><p class="chart-insight">A significant portion of respondents (nearly 60%) do not have a personal source of income, relying on other means.</p></div>
            <div class="card"><h4 style="margin-top:0">Monthly income distribution</h4><canvas id="chartIncomeAmount"></canvas><p class="chart-insight">Most personal incomes are below ‚Çπ3000, aligning with typical student or part-time earnings.</p></div>
            <div class="card"><h4 style="margin-top:0">Savings amount</h4><canvas id="chartSavingsAmount"></canvas><p class="chart-insight">Reflecting lower incomes, the majority of respondents save less than ‚Çπ1000 per month.</p></div>
            <div class="card"><h4 style="margin-top:0">Where they save</h4><canvas id="chartSaveWhere"></canvas><p class="chart-insight">While many use bank accounts, a large number of youths still rely on keeping physical cash for their savings.</p></div>
        </div>
    </section>
    
    <!-- SPENDING SECTION -->
    <section id="spending" class="card" style="display:none">
        <div class="section-title"><h2 style="margin:0">Spending Habits</h2></div>
        <div class="grid">
            <div class="card"><h4 style="margin-top:0">Top spending categories</h4><canvas id="chartSpendingCategories"></canvas><p class="chart-insight">"Food" is the dominant spending category, followed by "Transport," which is typical for a student demographic.</p></div>
            <div class="card"><h4 style="margin-top:0">Impulse & Guilt</h4><canvas id="chartImpulseGuilt"></canvas><p class="chart-insight">Impulse purchases are common, and a majority feel guilt about their spending, showing a conflict between desire and financial prudence.</p></div>
            <div class="card"><h4 style="margin-top:0">What influences spending</h4><canvas id="chartSpendingInfluence"></canvas><p class="chart-insight">"Need" and "Mood" are the strongest drivers of spending, far outweighing external pressures like ads or peers.</p></div>
        </div>
    </section>

    <!-- LITERACY SECTION -->
    <section id="literacy" class="card" style="display:none">
        <div class="section-title"><h2 style="margin:0">Financial Literacy & Awareness</h2></div>
        <div class="grid">
            <div class="card"><h4 style="margin-top:0">Budgeting & Awareness</h4><canvas id="chartLiteracyAware"></canvas><p class="chart-insight">While awareness of concepts like inflation is high, there's a near-even split between those who prepare a budget and those who don't.</p></div>
            <div class="card"><h4 style="margin-top:0">Sources of knowledge</h4><canvas id="chartSources"></canvas><p class="chart-insight">Family and Social Media are the primary sources of financial knowledge, surpassing formal education.</p></div>
            <div class="card"><h4 style="margin-top:0">Comparison behaviour</h4><canvas id="chartCompareProgram"></canvas><p class="chart-insight">While most compare prices before buying, very few have ever attended a formal financial education program.</p></div>
        </div>
    </section>

    <!-- ATTITUDES SECTION -->
    <section id="attitudes" class="card" style="display:none">
        <div class="section-title"><h2 style="margin:0">Attitudes & Confidence</h2></div>
        <div class="grid">
            <div class="card"><h4 style="margin-top:0">Confidence in managing finances</h4><canvas id="chartConfidence"></canvas><p class="chart-insight">Confidence is generally average-to-high, but a notable number of respondents still rate their confidence level as low.</p></div>
            <div class="card"><h4 style="margin-top:0">Interest in learning personal finance</h4><canvas id="chartInterest"></canvas><p class="chart-insight">There is an overwhelming interest in learning more about personal finance, indicating a highly receptive audience.</p></div>
        </div>
    </section>

    <!-- INVESTMENT SECTION -->
    <section id="investment" class="card" style="display:none">
        <div class="section-title"><h2 style="margin:0">Investment Behaviour</h2></div>
        <div class="grid">
            <div class="card"><h4 style="margin-top:0">Ideal age to start investing</h4><canvas id="chartInvestAge"></canvas><p class="chart-insight">The ideal age to start is perceived to be later than advisors recommend, pointing to a cautious mindset.</p></div>
            <div class="card"><h4 style="margin-top:0">Investment awareness types</h4><canvas id="chartInvestTypes"></canvas><p class="chart-insight">Awareness of traditional options like Stocks and Mutual Funds is high, alongside strong awareness of newer options like SIPs.</p></div>
            <div class="card"><h4 style="margin-top:0">Barriers to investing</h4><canvas id="chartInvestBarriers"></canvas><p class="chart-insight">"Lack of Knowledge" and "No Income" are the top barriers, showing education and financial capacity are the key hurdles.</p></div>
        </div>
    </section>

    <!-- FBI ANALYSIS SECTION -->
    <section id="indices" class="card" style="display:none">
        <div class="section-title"><h2 style="margin:0">FBI Analysis</h2></div>
        <p class="instructions" style="text-align: center;">The Financial Behaviour Index (FBI) is a composite score calculated from six key areas of financial health. The charts below visualize the group's performance in each area and the final aggregated score.</p>
        <div class="grid">
            <div class="card">
                <h4 style="margin-top:0">FBI Component Scores</h4>
                <canvas id="chartFbiComponents"></canvas>
                <p class="chart-insight">This chart compares the group's average score (blue bars) against the maximum possible score (cyan line) for each component, highlighting areas of strength and weakness.</p>
            </div>
            <div class="card">
                <h4 style="margin-top:0">Final Financial Behaviour Index (FBI)</h4>
                <canvas id="chartFbiFinal"></canvas>
                <p class="chart-insight">This stacked column shows the final score (blue) and the remaining points to reach the maximum of 29 (faint bar). The group's total FBI is <strong>18.3</strong>.</p>
            </div>
        </div>
    </section>


    <!-- CONCLUSION SECTION -->
    <section id="conclusion" class="card" style="display:none">
        <div class="section-title"><h2>Conclusion & Core Insights from the Data</h2></div>
        <p class="instructions" style="text-align: center;">Synthesizing the data from across all sections reveals three primary narratives about the financial behavior of youth:</p>
            <div class="card"><h4 style="margin-top:0">1. The Aspiration-Action Gap</h4><p class="small">A primary insight from the survey is the significant gap between financial aspiration and practical action. An overwhelming majority of respondents express a strong interest in learning about personal finance, and most believe investing should start early. However, this high level of interest does not translate into formal learning, with very few having attended any financial programs. This indicates a highly motivated but underserved demographic, eager for financial knowledge but currently lacking the channels to act on that ambition effectively.</p></div>
            <div class="card"><h4 style="margin-top:0">2. The Digital Dilemma: Convenience Over Credibility</h4><p class="small">The data reveals a heavy reliance on informal, digital-first sources for financial education. "Social Media" and "Family" rank as the top sources of knowledge, far outpacing formal education. While accessible, these channels can promote speculative behavior and are often influenced by trends rather than sound principles. This "Digital Dilemma" is a core theme: youth are choosing convenient but less reliable sources, contributing to "Lack of Knowledge" being the single biggest barrier to investing.</p></div>
            <div class="card"><h4 style="margin-top:0">3. The Confidence Paradox</h4><p class="small">There appears to be a paradox in self-perceived financial confidence. A healthy number of students rate their money management confidence as average to high. However, this is contrasted by spending habits that suggest a lack of control, such as a high frequency of impulse purchases and a strong influence of non-essential factors like "Discounts" on their spending decisions. This suggests their confidence may be more a reflection of comfort with digital payment tools rather than a deep understanding of core financial principles.</p></div>
            <div class="card"><h4 style="margin-top:0">Actionable Recommendations</h4><p class="small">Based on these insights, we propose: <em>"1. **Educational Initiative:** Universities must bridge the Aspiration-Action gap by integrating practical, workshop-style financial modules into the curriculum. 2. **FinTech Opportunity:** A financial app that combines reliable, gamified learning with micro-investment tools could be highly effective. 3. **Strategic Content:** Financial educators should focus content on moving beyond awareness to actionable steps, helping to close the Confidence Paradox by building genuine skills."</em></p></div>
    </section>

    <footer class="small">Built with Chart.js ‚Äî Replace the sample data below with your survey response counts.</footer>
</div>

<script>
/* ==========================================================================
   EDITABLE DATA SECTION
   ========================================================================== */
const DATA = {
    // Demographics (Q1-Q4)
    age: { "17":51, "18": 60, "19": 105, "20": 68, "21": 45, "22": 41, "23": 44, "24": 40, "25": 38, "25+": 42},
    gender: { "Male": 290, "Female": 244 },
    education: { "12th": 107, "Undergrad": 225, "Postgrad": 105, "Diploma":2, "PhD": 94, "D pharma": 1 },
    employment: { "Part-time": 117, "Full-time": 106, "Self-employed": 103, "Studying": 208 },

    // Income & Savings (Q5 - Q8)
    incomeSource: { "Yes (have income)": 242, "No (no income)": 292 },
    incomeAmount: { "0-500": 119, "500-1000": 87, "1000-3000": 36, "3000-5000": 82, "5000+": 157 },
    saveAmount: { "0-500": 158, "500-1000": 102, "1000-2000": 83, "2000-3000": 62, "3000-5000": 63, "5000+": 61},
    saveWhere: { "Cash": 164, "Bank": 147, "Digital Wallet": 116, "FD": 78, "Don't save": 87 },

    // Spending Habits (Q9 - Q15)
    spendingCategories: { "Food": 189, "Transport": 143, "Bills": 94, "Entertainment": 95, "Shopping": 163, "Education": 105 },
    impulse: { "Regularly": 112, "Occasionally": 161, "Rarely": 144, "Never": 117 },
    spendingInfluence: { "Discounts": 141, "Peer pressure": 87, "Ads/Social": 92, "Mood": 142, "Need": 157 },
    guilt: { "Always": 130, "Often": 127, "Sometimes": 157, "Never": 120 },

    // Financial Literacy (Q16 - Q21)
    prepareBudget: { "Yes": 178, "No": 190, "Ask guardians": 166 },
    awareInterestInflation: { "Yes": 298, "No": 236 },
    compareBeforeBuying: { "Yes": 274, "No": 260 },
    attendedProgram: { "Yes": 239, "No": 295 },
    sources: { "School/College": 144, "Family": 155, "Social Media": 141, "Books": 97, "Classes": 92, "None": 78 },
    knowDiffSaveInvest: { "Yes": 317, "No": 217 },

    // Attitudes & Confidence (Q27 & Q31)
    confidence: { "1 (Low)":83, "2": 90, "3": 117, "4": 134, "5 (High)": 110 },
    interestLearn: { "Definitely": 223, "Not sure": 164, "Not interested": 147 },

    // Investment Behaviour (Q28 - Q30)
    investAge: { "18-20": 192, "20-25": 152, "25-30": 100, "30+": 90 },
    investTypes: { "Stocks": 151, "Mutual Funds": 146, "FD": 149, "Crypto": 118, "SIP": 124, "Don't know": 108 },
    investBarriers: { "Lack of knowledge": 139, "Fear of loss": 114, "No income": 142, "Lack of interest": 93, "Already investing": 113 }
};

/* ==========================================================================
   DYNAMIC CONTENT & CHART CREATION LOGIC
   ========================================================================== */

const totalRespondents = Object.values(DATA.gender).reduce((sum, count) => sum + count, 0);
(function displayTotalRespondents() {
    const displayElement = document.getElementById('totalRespondents');
    if (displayElement && totalRespondents > 0) { displayElement.textContent = `Based on ${totalRespondents} survey respondents.`; }
})();

// --- FBI CALCULATION LOGIC ---
const fbiScores = (function calculateFbiScores() {
    if (totalRespondents === 0) return { components: {}, total: 0 };
    
    const literacyScore = (((DATA.prepareBudget['Yes'] / totalRespondents) * 1) + 
                         ((DATA.awareInterestInflation['Yes'] / totalRespondents) * 1) + 
                         ((DATA.attendedProgram['Yes'] / totalRespondents) * 1) + 
                         (Math.min(3, ((DATA.investTypes['Stocks'] + DATA.investTypes['Mutual Funds'] + DATA.investTypes['FD']) / totalRespondents)) * 1));
                             
    const spendingScore = ((((DATA.spendingCategories['Education']) / totalRespondents) * 2) +
                           (((DATA.spendingCategories['Food'] + DATA.spendingCategories['Entertainment'] + DATA.spendingCategories['Shopping']) / totalRespondents) * 1) +
                           (((DATA.impulse['Occasionally'] * 1) + (DATA.impulse['Rarely'] * 2) + (DATA.impulse['Never'] * 3)) / totalRespondents));

    const savingScore = ((((142 - DATA.saveWhere["Don't save"]) / totalRespondents) * 2) +
                         (((DATA.saveWhere['Bank'] + DATA.saveWhere['FD']) * 2 + DATA.saveWhere['Cash'] * 1) / totalRespondents) +
                         (Math.min(3, ((DATA.investTypes['Stocks'] + DATA.investTypes['Mutual Funds'] + DATA.investTypes['FD']) / totalRespondents)) * 1));

    const influenceScore = (((DATA.spendingInfluence['Need'] * 3) + (DATA.spendingInfluence['Peer pressure'] * 2) + (DATA.spendingInfluence['Ads/Social'] * 1)) / totalRespondents);
    
    const digitalUsageScore = (Math.min(3, ((DATA.saveWhere['Bank'] + DATA.saveWhere['Digital Wallet'] + DATA.saveWhere['FD']) / totalRespondents)) * 1 + 
                               (((DATA.saveWhere['Bank'] > 0 || DATA.saveWhere['Digital Wallet'] > 0) ? 1 : 0)));

    const confidenceScore = (((DATA.confidence['5 (High)'] * 3) + (DATA.confidence['4'] * 3) + (DATA.confidence['3'] * 2) + (DATA.confidence['2'] * 1) + (DATA.confidence['1 (Low)'] * 1)) / totalRespondents);

    const scores = {
        'Financial Literacy': literacyScore.toFixed(1),
        'Spending Habit': spendingScore.toFixed(1),
        'Saving & Investment': savingScore.toFixed(1),
        'Influence Factor': influenceScore.toFixed(1),
        'Digital Usage': digitalUsageScore.toFixed(1),
        'Goal Confidence': confidenceScore.toFixed(1),
    };
    
    const totalFbi = Object.values(scores).reduce((sum, score) => sum + parseFloat(score), 0);
    return { components: scores, total: totalFbi.toFixed(1) };
})();


const createdCharts = new Set();
Chart.defaults.color = 'rgba(224, 247, 250, 0.9)';
Chart.defaults.borderColor = 'rgba(0, 229, 255, 0.2)';
Chart.defaults.font.family = "'Segoe UI', system-ui, Arial, sans-serif";

function generateColors(numColors, hueStart = 180) {
    const colors = [];
    const hueStep = 45;
    for (let i = 0; i < numColors; i++) {
        const hue = (hueStart + i * hueStep) % 360;
        colors.push(`hsla(${hue}, 100%, 70%, 0.7)`);
    }
    return colors;
}

function createChart(canvasId, type, data, options = {}) {
    const ctx = document.getElementById(canvasId).getContext('2d');
    const colors = generateColors(Object.keys(data).length);
    let chartData = {
        labels: Object.keys(data),
        datasets: [{
            data: Object.values(data),
            backgroundColor: colors,
            borderColor: colors.map(c => c.replace('0.7', '1')),
            borderWidth: 1,
            hoverOffset: 4
        }]
    };
    const chartOptions = {
        responsive: true,
        maintainAspectRatio: false,
        indexAxis: options.indexAxis || 'x',
        plugins: {
            legend: { display: (type === 'pie' || type === 'doughnut'), position: 'bottom' },
            tooltip: {
                enabled: true,
                backgroundColor: 'rgba(13, 26, 38, 0.9)', 
                titleColor: '#00e5ff', 
                bodyColor: '#e0f7fa', 
                padding: 10,
                callbacks: { label: (context) => `${context.label}: ${context.raw}` }
            }
        },
        scales: (type === 'bar') ? {
            y: { beginAtZero: true, grid: { color: 'rgba(0, 229, 255, 0.1)' } },
            x: { grid: { color: 'rgba(0, 229, 255, 0.1)' } }
        } : {},
         ...(type === 'radar' && {
            scales: {
                r: {
                    angleLines: { color: 'rgba(224, 247, 250, 0.2)' },
                    grid: { color: 'rgba(224, 247, 250, 0.2)' },
                    pointLabels: { color: 'rgba(224, 247, 250, 0.9)', font: { size: 12 } },
                    ticks: { backdropColor: 'rgba(13, 26, 38, 0.8)', color: 'rgba(224, 247, 250, 0.9)' }
                }
            }
        })
    };
    return new Chart(ctx, { type, data: chartData, options: chartOptions });
}

function createCombinedChart(canvasId, type, data1, data2, label1, label2) {
    const ctx = document.getElementById(canvasId).getContext('2d');
    const labels = [...Object.keys(data1), ...Object.keys(data2)];
    return new Chart(ctx, { type, data: { labels, datasets: [ { label: label1, data: [...Object.values(data1), ...Array(Object.keys(data2).length).fill(0)], backgroundColor: `hsla(180, 100%, 70%, 0.7)` }, { label: label2, data: [...Array(Object.keys(data1).length).fill(0), ...Object.values(data2)], backgroundColor: `hsla(225, 100%, 70%, 0.7)` } ] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' }, tooltip: { 
        enabled: true,
        backgroundColor: 'rgba(13, 26, 38, 0.9)', 
        titleColor: '#00e5ff', 
        bodyColor: '#e0f7fa', 
        callbacks: {
            label: function(context) {
                return `${context.dataset.label} (${context.label}): ${context.raw}`;
            }
        }
    } }, scales: { x: { stacked: true, grid: { color: 'rgba(0, 229, 255, 0.1)' } }, y: { stacked: true, beginAtZero: true, grid: { color: 'rgba(0, 229, 255, 0.1)' } } } } });
}

// --- NEW CHART CREATION FUNCTIONS FOR FBI ---
function createFbiComboChart(canvasId, averageScores) {
    const ctx = document.getElementById(canvasId).getContext('2d');
    const maxScores = {
        'Financial Literacy': 6, 'Spending Habit': 6, 'Saving & Investment': 7, 
        'Influence Factor': 3, 'Digital Usage': 4, 'Goal Confidence': 3
    };

    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: Object.keys(averageScores),
            datasets: [
                {
                    label: 'Average Score',
                    data: Object.values(averageScores),
                    backgroundColor: 'hsla(225, 100%, 70%, 0.7)',
                    borderColor: 'hsla(225, 100%, 70%, 1)',
                    borderWidth: 1
                },
                {
                    label: 'Max Score',
                    data: Object.values(maxScores),
                    type: 'line',
                    borderColor: 'var(--primary-accent)',
                    backgroundColor: 'transparent',
                    pointBackgroundColor: 'var(--primary-accent)',
                    tension: 0.1,
                    borderDash: [5, 5]
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { position: 'bottom' } },
            scales: { y: { beginAtZero: true, grid: { color: 'rgba(0, 229, 255, 0.1)' } } }
        }
    });
}

function createFbiStackedColumnChart(canvasId, score) {
    const ctx = document.getElementById(canvasId).getContext('2d');
    const scoreAchieved = parseFloat(score);
    const scoreRemaining = 29 - scoreAchieved;

    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Final FBI Score'],
            datasets: [
                {
                    label: 'Score Achieved',
                    data: [scoreAchieved],
                    backgroundColor: 'hsla(225, 100%, 70%, 0.7)',
                    borderColor: 'hsla(225, 100%, 70%, 1)',
                    borderWidth: 1
                },
                {
                    label: 'Score Remaining to Max',
                    data: [scoreRemaining],
                    backgroundColor: 'rgba(255, 255, 255, 0.1)',
                    borderColor: 'rgba(255, 255, 255, 0.2)',
                    borderWidth: 1
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { position: 'bottom' },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            return `${context.dataset.label}: ${context.raw.toFixed(1)}`;
                        }
                    }
                }
            },
            scales: {
                y: {
                    stacked: true,
                    beginAtZero: true,
                    max: 29,
                    title: { display: true, text: 'Score (out of 29)' },
                    grid: { color: 'rgba(0, 229, 255, 0.1)' }
                },
                x: {
                    stacked: true,
                    grid: { display: false }
                }
            }
        }
    });
}


function initializeChartsForSection(sectionId) {
    if (createdCharts.has(sectionId)) return;
    switch(sectionId) {
        case 'demographics':
            createChart('chartAge', 'bar', DATA.age);
            createChart('chartGender', 'doughnut', DATA.gender);
            createCombinedChart('chartEduEmp', 'bar', DATA.education, DATA.employment, 'Education', 'Employment');
            break;
        case 'income':
            createChart('chartIncomeSource', 'pie', DATA.incomeSource);
            createChart('chartIncomeAmount', 'bar', DATA.incomeAmount);
            createChart('chartSavingsAmount', 'bar', DATA.saveAmount);
            createChart('chartSaveWhere', 'doughnut', DATA.saveWhere);
            break;
        case 'spending':
            createChart('chartSpendingCategories', 'doughnut', DATA.spendingCategories);
            createCombinedChart('chartImpulseGuilt', 'bar', DATA.impulse, DATA.guilt, 'Impulse Buys', 'Spending Guilt');
            createChart('chartSpendingInfluence', 'radar', DATA.spendingInfluence);
            break;
        case 'literacy':
             createCombinedChart('chartLiteracyAware', 'bar', DATA.prepareBudget, DATA.awareInterestInflation, 'Prepares Budget', 'Aware of Inflation');
             createChart('chartSources', 'bar', DATA.sources, { indexAxis: 'y' });
             createCombinedChart('chartCompareProgram', 'bar', DATA.compareBeforeBuying, DATA.attendedProgram, 'Compares Before Buying', 'Attended Program');
            break;
        case 'attitudes':
            createChart('chartConfidence', 'bar', DATA.confidence);
            createChart('chartInterest', 'doughnut', DATA.interestLearn);
            break;
        case 'investment':
            createChart('chartInvestAge', 'bar', DATA.investAge);
            createChart('chartInvestTypes', 'bar', DATA.investTypes);
            createChart('chartInvestBarriers', 'bar', DATA.investBarriers, { indexAxis: 'y' });
            break;
        case 'indices':
            createFbiComboChart('chartFbiComponents', fbiScores.components);
            createFbiStackedColumnChart('chartFbiFinal', fbiScores.total);
            break;
    }
    createdCharts.add(sectionId);
}

document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            const targetId = btn.getAttribute('data-target');
            document.querySelectorAll('section').forEach(sec => sec.style.display = 'none');
            const targetElement = document.getElementById(targetId);
            if(targetElement) targetElement.style.display = 'block';
            if (targetId !== 'overview' && targetId !== 'conclusion') { initializeChartsForSection(targetId); }
            window.scrollTo({top: 0, behavior: 'smooth'});
        });
    });
    document.getElementById('overview').style.display = 'block';
});
</script>
</body>
</html>


