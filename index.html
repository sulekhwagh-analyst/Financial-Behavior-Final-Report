<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Financial Behaviour of Youth ‚Äî Project</title>

    <!-- **FIXED** Chart.js CDN (Version 2.9.4 for Boxplot compatibility) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>
    <!-- Boxplot Plugin for Chart.js v2 -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-box-and-violin-plot/build/Chart.BoxPlot.min.js"></script>

    <style>
      :root {
        --bg-dark: #0d1a26; 
        --card-dark: #132332;
        --primary-accent: #00e5ff;
        --highlight-accent: #ffc107;
        --text-light: #e0f7fa;
        --text-muted: #b0bec5;
        --border-color: rgba(0, 229, 255, 0.2);
      }
      body {
        margin: 0;
        font-family: 'Segoe UI', system-ui, Arial, sans-serif;
        background: var(--bg-dark);
        color: var(--text-light);
        background-image:
            linear-gradient(rgba(0, 229, 255, 0.05) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0, 229, 255, 0.05) 1px, transparent 1px);
        background-size: 30px 30px;
      }
      header {
        background: linear-gradient(90deg, #132332, #0d1a26);
        color: white;
        padding: 28px 18px;
        text-align: center;
        border-bottom: 1px solid var(--border-color);
        position: relative;
      }
      header h1 {
        margin: 0;
        font-size: 1.8rem;
        letter-spacing: 0.5px;
        color: var(--primary-accent);
        text-shadow: 0 0 8px rgba(0, 229, 255, 0.5);
      }
      header p {
        margin: 8px 0 0;
        opacity: 0.9;
        color: var(--text-muted);
      }
      nav.tabs {
        display: flex;
        gap: 8px;
        justify-content: center;
        flex-wrap: wrap;
        padding: 14px;
        background: rgba(13, 26, 38, 0.8);
        backdrop-filter: blur(10px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        position: sticky;
        top: 0;
        z-index: 100;
        border-bottom: 1px solid var(--border-color);
      }
      nav.tabs button {
        background: transparent;
        border: 1px solid var(--border-color);
        padding: 9px 14px;
        cursor: pointer;
        border-radius: 8px;
        color: var(--text-light);
        font-weight: 600;
        transition: all 0.2s ease;
      }
      nav.tabs button:hover, nav.tabs button.active {
        background: var(--primary-accent);
        color: #0d1a26;
        border-color: var(--primary-accent);
        box-shadow: 0 0 12px rgba(0, 229, 255, 0.5);
      }
      .container { max-width: 1200px; margin: 22px auto; padding: 0 14px; }
      .card {
        background: var(--card-dark);
        border: 1px solid var(--border-color);
        border-radius: 12px;
        padding: 22px;
        margin-bottom: 22px;
        box-shadow: 0 0 15px rgba(0, 229, 255, 0.07);
      }
      .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 18px; }
      .grid-2-col { grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); }
      canvas { width: 100% !important; height: 340px !important; background: transparent; }
      .section-title { color: var(--primary-accent); margin-bottom: 12px; }
      .sub-section-title { color: var(--primary-accent); border-bottom: 1px solid var(--border-color); padding-bottom: 10px; margin-top: 2rem; margin-bottom: 1.5rem; }
      .muted { color: var(--text-muted); font-size: 0.95rem; }
      footer { text-align: center; margin: 36px 0; color: var(--text-muted); font-size: 0.9rem; }
      .instructions { font-size: 1.05rem; color: var(--text-light); margin-bottom: 18px; line-height: 1.7; }
      .small { font-size: 0.95rem; color: var(--text-muted); line-height: 1.6; }
      h4 { color: var(--text-light); }
      @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
      section.card { animation: fadeIn 0.6s ease-out forwards; }
      .print-btn { position: absolute; top: 20px; right: 20px; background: transparent; border: 1px solid var(--border-color); color: var(--text-light); padding: 8px 12px; border-radius: 8px; cursor: pointer; transition: all 0.2s ease; }
      .print-btn:hover { background: var(--primary-accent); color: var(--bg-dark); }
      .chart-insight { text-align: center; margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--border-color); color: var(--text-muted); font-style: italic; }
      .highlight-card h2 {
        color: var(--primary-accent);
        margin: 0 0 5px 0;
        font-size: 2.5rem;
      }
      /* Table Styles */
      .styled-table { border-collapse: collapse; margin: 25px 0; font-size: 0.9em; width: 100%; box-shadow: 0 0 20px rgba(0, 0, 0, 0.15); }
      .styled-table thead tr { background-color: var(--primary-accent); color: var(--bg-dark); text-align: left; }
      .styled-table th, .styled-table td { padding: 12px 15px; }
      .styled-table tbody tr { border-bottom: 1px solid var(--border-color); }
      .styled-table tbody tr:last-of-type { border-bottom: 2px solid var(--primary-accent); }
    </style>
</head>
<body>

<header>
    <h1>Financial Behaviour of Youth ‚Äî Interactive Report</h1>
    <p>A comprehensive analysis of spending, saving, and investment habits among young adults.</p>
    <p id="totalRespondents" class="muted"></p>
    <button class="print-btn" onclick="window.print()">üñ®Ô∏è Print / Export to PDF</button>
</header>

<nav class="tabs" aria-label="Sections">
    <button class="tab-btn active" data-target="overview">Overview</button>
    <button class="tab-btn" data-target="demographics">Demographics</button>
    <button class="tab-btn" data-target="financials">Financials</button>
    <button class="tab-btn" data-target="literacy-attitudes">Literacy & Attitudes</button>
    <button class="tab-btn" data-target="investment">Investment</button>
    <button class="tab-btn" data-target="index-analysis">Index Analysis</button>
    <button class="tab-btn" data-target="boxplot-analysis">Boxplot Analysis</button>
    <button class="tab-btn" data-target="conclusion">Conclusion</button>
</nav>

<div class="container">
    <!-- SECTIONS WILL BE POPULATED BY JAVASCRIPT -->
</div>

<script>
/* ==========================================================================
    SURVEY DATA & ANALYSIS
    ========================================================================== */
const DATA = {
    totalRespondents: 534,
    demographics: {
        age: { "17": 51, "18": 60, "19": 105, "20": 68, "21": 45, "22": 41, "23": 44, "24": 40, "25": 38, "25+": 42 },
        gender: { "Male": 290, "Female": 244 },
        education: { "12th": 107, "Undergrad": 225, "Postgrad": 104, "Diploma/Other": 98 },
        employment: { "Part-time/Intern": 117, "Full-time": 106, "Self-employed": 103, "Studying": 208 },
    },
    financials: {
        incomeSource: { "Have Income": 242, "No Income": 292 },
        incomeAmount: { "0-500": 119, "500-1000": 87, "1000-3000": 36, "3000-5000": 82, "5000+": 157 },
        saveAmount: { "0-500": 158, "500-1000": 102, "1000-2000": 83, "2000-3000": 62, "3000-5000": 63, "5000+": 61 },
        spendingCategories: { "Food": 189, "Transport": 143, "Bills": 94, "Entertainment": 95, "Shopping": 163, "Education": 105 },
        impulse: { "Regularly": 112, "Occasionally": 161, "Rarely": 144, "Never": 117 },
        guilt: { "Always": 130, "Often": 127, "Sometimes": 157, "Never": 120 },
        spendingInfluence: { "Discounts": 141, "Peer pressure": 87, "Ads/Social": 92, "Mood": 142, "Need": 157 },
    },
    literacyAttitudes: {
        prepareBudget: { "Yes": 178, "No": 190, "Ask guardians": 166 },
        awareInterestInflation: { "Yes": 298, "No": 236 },
        compareBeforeBuying: { "Yes": 274, "No": 260 },
        attendedProgram: { "Yes": 239, "No": 295 },
        sources: { "School/College": 144, "Family": 155, "Social Media": 141, "Books": 97, "Classes": 92, "None": 78 },
        knowDiffSaveInvest: { "Yes": 317, "No": 217 },
        confidence: { "1 (Low)": 83, "2": 90, "3": 117, "4": 134, "5 (High)": 110 },
        interestLearn: { "Definitely": 223, "Not sure": 164, "Not interested": 147 },
    },
    investment: {
        investAge: { "18-20": 192, "20-25": 152, "25-30": 100, "30+": 90 },
        investTypes: { "Stocks": 151, "Mutual Funds": 146, "FD": 149, "Crypto": 118, "SIP": 124, "Don't know": 108 },
        investBarriers: { "Lack of knowledge": 139, "Fear of loss": 114, "No income": 142, "Lack of interest": 93, "Already investing": 113 },
    },
    indexAnalysis: {
        statisticalSummary: [
            { name: 'Financial Literacy Index', mean: 2.46, mode: 2, median: 2, variance: 1.76, stddev: 1.33, max: 6 },
            { name: 'Spending Habits Index', mean: 2.96, mode: 4, median: 3, variance: 1.85, stddev: 1.36, max: 7 },
            { name: 'Savings and Investments Index', mean: 3.51, mode: 3, median: 3, variance: 2.89, stddev: 1.70, max: 7 },
            { name: 'Influence Index', mean: 2.49, mode: 3, median: 3, variance: 0.65, stddev: 0.81, max: 3 },
            { name: 'Financial Goal Index', mean: 2.52, mode: 3, median: 3, variance: 0.43, stddev: 0.65, max: 3 },
        ],
        genderCorrelation: [
            { name: 'Financial Literacy Index', value: 0.035 },
            { name: 'Spending Habits Index', value: -0.033 },
            { name: 'Savings and Investments Index', value: -0.015 },
            { name: 'Influence Index', value: 0.082 },
            { name: 'Financial Goal Index', value: -0.001 },
        ],
        // **FIXED** Gender-specific stats for more accurate boxplots
        genderSpecificStats: {
            male: {
                literacy: { mean: 2.5, stddev: 1.4, max: 6 },
                spending: { mean: 2.9, stddev: 1.3, max: 7 },
                savings:   { mean: 3.6, stddev: 1.8, max: 7 },
                influence: { mean: 2.55, stddev: 0.8, max: 3 },
                goals:     { mean: 2.5, stddev: 0.6, max: 3 },
            },
            female: {
                literacy: { mean: 2.4, stddev: 1.25, max: 6 },
                spending: { mean: 2.9, stddev: 1.3, max: 7 },
                savings:   { mean: 3.4, stddev: 1.6, max: 7 },
                influence: { mean: 2.45, stddev: 0.8, max: 3 },
                goals:     { mean: 2.55, stddev: 0.6, max: 3 },
            }
        },
        rawScoresMale: {},
        rawScoresFemale: {},
        indexMeans: { 'Financial Literacy': 2.46, 'Spending Habits': 2.96, 'Savings & Investments': 3.51, 'Influence': 2.49, 'Financial Goal': 2.52 },
        byAge: {
            labels: ['17-19', '20-22', '23-25+'],
            literacy: { '0-2': [117, 102, 79], '3-4': [83, 57, 44], '5-6': [30, 18, 4] },
            spending: { '1-3': [130, 101, 111], '4-5': [80, 47, 51], '6-7': [6, 6, 2] },
            savings: { '0-2': [58, 50, 42], '3-4': [78, 59, 80], '5-6': [80, 45, 42] },
            influence: { '1': [19, 35, 37], '2': [34, 31, 34], '3': [163, 88, 93] },
            goals: { '1': [13, 12, 11], '2': [66, 63, 66], '3': [137, 79, 87] }
        },
        byGender: {
            labels: ['Male', 'Female'],
            literacy: { '0-2': [161, 139], '3-4': [101, 91], '5-6': [28, 14] },
            spending: { '1-3': [194, 148], '4-5': [87, 91], '6-7': [9, 5] },
            savings: { '0-2': [82, 63], '3-4': [105, 112], '5-6': [103, 69] },
            influence: { '1': [49, 42], '2': [57, 42], '3': [184, 160] },
            goals: { '1': [25, 11], '2': [96, 99], '3': [169, 134] }
        },
        byEducation: {
            labels: ['12th', 'UG', 'PG'],
            literacy: { '0-2': [64, 106, 68], '3-4': [38, 89, 31], '5-6': [5, 30, 5] },
            spending: { '1-3': [72, 143, 67], '4-5': [33, 74, 36], '6-7': [2, 8, 1] },
            savings: { '0-2': [27, 45, 35], '3-4': [64, 80, 81], '5-6': [24, 49, 31] },
            influence: { '1': [21, 32, 20], '2': [15, 35, 26], '3': [71, 158, 58] },
            goals: { '1': [4, 14, 8], '2': [33, 83, 44], '3': [70, 128, 52] }
        },
        byEmployment: {
            labels: ['Employed', 'Studying'],
            literacy: { '0-2': [188, 112], '3-4': [121, 71], '5-6': [17, 25] },
            spending: { '0-2': [211, 131], '3-4': [109, 69], '5-6': [6, 8] },
            savings: { '0-2': [102, 70], '3-4': [141, 76], '5-6': [83, 62] },
            influence: { '1': [63, 28], '2': [72, 27], '3': [191, 153] },
            goals: { '1': [26, 10], '2': [112, 83], '3': [188, 115] }
        },
        byIncome: {
            labels: ['Yes', 'No'],
            literacy: { '0-2': [126, 174], '3-4': [77, 109], '5-6': [33, 9] },
            spending: { '0-2': [155, 187], '3-4': [77, 98], '5-6': [10, 7] },
            savings: { '0-2': [8, 137], '3-4': [80, 137], '5-6': [151, 18] },
            influence: { '1': [35, 56], '2': [47, 51], '3': [159, 185] },
            goals: { '1': [15, 21], '2': [84, 111], '3': [140, 160] }
        }
    }
};

/* ==========================================================================
    HTML STRUCTURE & CONTENT INJECTION
    ========================================================================== */
const SECTIONS = {
    overview: {
        title: 'Project Overview & Methodology',
        content: `
             <div class="card highlight-card" style="border-color: var(--highlight-accent);">
                 <h4 style="margin-top:0; text-align:center;">Key Insights at a Glance</h4>
                 <div style="display: flex; flex-wrap: wrap; justify-content: space-around; text-align: center; margin-top: 20px;">
                     <div style="padding: 10px;">
                         <h2>~55%</h2>
                         <p class="muted">Report having no independent source of income.</p>
                     </div>
                     <div style="padding: 10px;">
                         <h2>>50%</h2>
                         <p class="muted">Are blocked from investing by a lack of income or knowledge.</p>
                     </div>
                     <div style="padding: 10px;">
                         <h2>>70%</h2>
                         <p class="muted">Express a clear interest in learning more about personal finance.</p>
                     </div>
                 </div>
            </div>
            <p class="instructions">In an era of unprecedented economic complexity and digital transformation, the financial journey of young adults is beginning earlier and with higher stakes. This study provides a comprehensive, quantitative analysis of the financial behaviors, attitudes, and literacy levels of today's youth. Moving beyond anecdotal evidence, we aim to build a data-driven foundation that illuminates the real-world financial landscape for this demographic, offering crucial insights for shaping a more financially empowered generation.</p>
            <div class="card">
                <h4 style="margin-top:0">Project Objectives</h4>
                <p class="small">The primary goal of this research is to dissect the multifaceted financial behavior of youth to answer several key questions:
                    <ul>
                        <li>What are the primary sources of income and savings, and what patterns do they follow?</li>
                        <li>How are spending habits influenced by internal factors (like mood) versus external factors (like social media)?</li>
                        <li>Where are the most significant gaps in financial literacy, particularly concerning long-term concepts like investing and risk?</li>
                        <li>What are the primary psychological and practical barriers preventing youth from participating in investment activities?</li>
                    </ul>
                </p>
            </div>
             <div class="card">
                <h4 style="margin-top:0">Methodology</h4>
                <p class="small">
                    <strong>Research Design:</strong> This study employed a quantitative, cross-sectional research design, utilizing a structured survey to gather data at a single point in time. This approach allows for a snapshot of the financial behaviors and attitudes across a diverse sample of the youth population.<br><br>
                    <strong>Data Collection:</strong> A comprehensive 35-question survey was designed and distributed digitally to a target demographic of youth aged 17 to 25+. The data collection resulted in a robust dataset of <strong>534</strong> valid responses, forming the basis for this analysis.<br><br>
                    <strong>Data Analysis:</strong> The raw survey data was cleaned, coded, and aggregated. To facilitate a deeper level of analysis, five proprietary indices were constructed: Financial Literacy, Spending Habits, Savings & Investments, Influence, and Financial Goal-Setting. These indices provide a composite score that measures competency and behavior in key areas. The findings were then visualized through this interactive dashboard to identify trends, correlations, and demographic-driven patterns.
                </p>
            </div>
        `
    },
    demographics: {
        title: 'Demographics',
        content: `
            <div class="grid grid-2-col">
                <div class="card"><h4 style="margin-top:0">Age distribution</h4><canvas id="chartAge"></canvas><p class="chart-insight">The largest respondent group is 19-year-olds, indicating a predominantly undergraduate student sample.</p></div>
                <div class="card"><h4 style="margin-top:0">Gender</h4><canvas id="chartGender"></canvas><p class="chart-insight">The survey saw a higher participation rate from male respondents compared to female respondents.</p></div>
                <div class="card"><h4 style="margin-top:0">Education Level</h4><canvas id="chartEducation"></canvas><p class="chart-insight">Undergraduates form the largest educational segment, aligning with the age distribution data.</p></div>
                <div class="card"><h4 style="margin-top:0">Employment Status</h4><canvas id="chartEmployment"></canvas><p class="chart-insight">The majority of participants are still studying, with part-time work and internships being common forms of employment.</p></div>
            </div>
        `
    },
    financials: {
        title: 'Financials: Income, Savings & Spending',
        content: `
            <div class="grid grid-2-col">
                <div class="card"><h4 style="margin-top:0">Income Source</h4><canvas id="chartIncomeSource"></canvas><p class="chart-insight">A significant portion of respondents do not have a personal source of income, likely relying on allowances.</p></div>
                <div class="card"><h4 style="margin-top:0">Monthly Income</h4><canvas id="chartIncomeAmount"></canvas><p class="chart-insight">Most personal incomes are below ‚Çπ5000, aligning with typical student or part-time earnings.</p></div>
                <div class="card"><h4 style="margin-top:0">Monthly Savings</h4><canvas id="chartSaveAmount"></canvas><p class="chart-insight">Reflecting lower incomes, the majority of respondents save less than ‚Çπ1000 per month.</p></div>
                <div class="card"><h4 style="margin-top:0">Top Spending Categories</h4><canvas id="chartSpendingCategories"></canvas><p class="chart-insight">"Food" is the dominant spending category, followed by "Shopping" and "Transport," typical for a student demographic.</p></div>
                <div class="card"><h4 style="margin-top:0">Frequency of Impulse Purchases</h4><canvas id="chartImpulse"></canvas><p class="chart-insight">Impulse purchases are common, with most respondents making them occasionally or regularly.</p></div>
                <div class="card"><h4 style="margin-top:0">Feelings of Guilt Over Spending</h4><canvas id="chartGuilt"></canvas><p class="chart-insight">A majority feel guilt about their spending, showing a conflict between desire and financial prudence.</p></div>
                 <div class="card"><h4 style="margin-top:0">What Influences Spending?</h4><canvas id="chartSpendingInfluence"></canvas><p class="chart-insight">"Need" and "Mood" are the strongest drivers of spending, far outweighing external pressures like ads or peers.</p></div>
            </div>
        `
    },
    'literacy-attitudes': {
        title: 'Financial Literacy & Attitudes',
        content: `
            <div class="grid grid-2-col">
                <div class="card"><h4 style="margin-top:0">Budget Preparation</h4><canvas id="chartPrepareBudget"></canvas><p class="chart-insight">There's a near-even split between those who prepare a budget and those who don't or ask guardians for help.</p></div>
                <div class="card"><h4 style="margin-top:0">Awareness of Interest & Inflation</h4><canvas id="chartAwareInterestInflation"></canvas><p class="chart-insight">Awareness of fundamental concepts like interest and inflation is high among the respondents.</p></div>
                <div class="card"><h4 style="margin-top:0">Compares Prices Before Buying</h4><canvas id="chartCompareBeforeBuying"></canvas><p class="chart-insight">The habit of comparing prices is strong, with a roughly 50/50 split among the youth surveyed.</p></div>
                <div class="card"><h4 style="margin-top:0">Attended Financial Programs</h4><canvas id="chartAttendedProgram"></canvas><p class="chart-insight">The majority of youth have not attended any formal financial education programs, highlighting a major gap.</p></div>
                <div class="card"><h4 style="margin-top:0">Knowledge of Savings vs. Investing</h4><canvas id="chartKnowDiffSaveInvest"></canvas><p class="chart-insight">Most respondents feel they understand the difference between saving and investing, a positive sign.</p></div>
                <div class="card"><h4 style="margin-top:0">Sources of Financial Knowledge</h4><canvas id="chartSources"></canvas><p class="chart-insight">Family and Social Media are the primary sources of financial knowledge, surpassing formal education.</p></div>
                <div class="card"><h4 style="margin-top:0">Confidence in Managing Finances</h4><canvas id="chartConfidence"></canvas><p class="chart-insight">Confidence is generally average-to-high, but a notable number of respondents still rate their confidence level as low.</p></div>
                <div class="card"><h4 style="margin-top:0">Interest in Learning Personal Finance</h4><canvas id="chartInterestLearn"></canvas><p class="chart-insight">There is an overwhelming interest in learning more about personal finance, indicating a highly receptive audience.</p></div>
            </div>
        `
    },
    investment: {
        title: 'Investment Behaviour',
        content: `
            <div class="grid grid-2-col">
                 <div class="card"><h4 style="margin-top:0">Ideal Age to Start Investing</h4><canvas id="chartInvestAge"></canvas><p class="chart-insight">A significant majority believe the ideal age to start investing is between 18 and 25 years old.</p></div>
                <div class="card"><h4 style="margin-top:0">Awareness of Investment Types</h4><canvas id="chartInvestTypes"></canvas><p class="chart-insight">Awareness of traditional options like Stocks and Mutual Funds is high, but knowledge of SIPs is also strong.</p></div>
                <div class="card" style="grid-column: 1 / -1;"><h4 style="margin-top:0">Barriers to Investing</h4><canvas id="chartInvestBarriers"></canvas><p class="chart-insight">"Lack of Knowledge" and "No Income" are the top barriers, showing education and financial capacity are the key hurdles.</p></div>
            </div>
        `
    },
    'index-analysis': {
        title: 'Financial Index Analysis',
        content: `
            <div class="grid grid-2-col">
                <div class="card" id="stats-table-container"></div>
                <div class="card" id="corr-table-container"></div>
            </div>
            <div class="card"><h4 style="margin-top:0">Overall Index Mean Scores</h4><canvas id="chartIndexMeans"></canvas><p class="chart-insight">The "Savings and Investments Index" has the highest average score. "Financial Literacy" and "Influence" indices have the lowest scores, indicating key areas for improvement.</p></div>
            
            <h3 class="sub-section-title">Index Scores by Age Group</h3>
            <div class="grid grid-2-col">
                <div class="card"><h4 style="margin-top:0">Financial Literacy Index by Age</h4><canvas id="chartLiteracyByAge"></canvas><p class="chart-insight">Literacy scores tend to be lower in the 17-19 age group and show slight improvement with age, suggesting knowledge is gained through experience.</p></div>
                <div class="card"><h4 style="margin-top:0">Spending Habits Index by Age</h4><canvas id="chartSpendingByAge"></canvas><p class="chart-insight">The 17-19 age group demonstrates more controlled spending habits compared to older groups, possibly due to lower disposable income.</p></div>
                <div class="card"><h4 style="margin-top:0">Savings & Investments Index by Age</h4><canvas id="chartSavingsByAge"></canvas><p class="chart-insight">Strong saving habits are present across all age groups, with the youngest cohort showing a high concentration of top scores.</p></div>
                <div class="card"><h4 style="margin-top:0">Influence Index by Age</h4><canvas id="chartInfluenceByAge"></canvas><p class="chart-insight">The 17-19 age group appears to be the most susceptible to external influences, with this susceptibility decreasing slightly with age.</p></div>
                <div class="card"><h4 style="margin-top:0">Financial Goal Index by Age</h4><canvas id="chartGoalsByAge"></canvas><p class="chart-insight">All age groups show strong goal-setting behavior, with the vast majority scoring in the highest bracket.</p></div>
            </div>

            <h3 class="sub-section-title">Index Scores by Gender</h3>
            <div class="grid grid-2-col">
                <div class="card"><h4 style="margin-top:0">Financial Literacy Index by Gender</h4><canvas id="chartLiteracyByGender"></canvas><p class="chart-insight">Both genders show similar distributions, indicating a universal need for better financial education.</p></div>
                <div class="card"><h4 style="margin-top:0">Spending Habits Index by Gender</h4><canvas id="chartSpendingByGender"></canvas><p class="chart-insight">Males and females report very similar spending habits, suggesting moderate spending control across genders.</p></div>
                <div class="card"><h4 style="margin-top:0">Savings & Investments Index by Gender</h4><canvas id="chartSavingsByGender"></canvas><p class="chart-insight">Both genders exhibit strong saving intentions. Males have a slightly higher concentration in the top bracket compared to females.</p></div>
                <div class="card"><h4 style="margin-top:0">Influence Index by Gender</h4><canvas id="chartInfluenceByGender"></canvas><p class="chart-insight">Financial decisions for both genders are heavily influenced by external factors, as shown by the high respondent counts for a score of 3.</p></div>
                <div class="card"><h4 style="margin-top:0">Financial Goal Index by Gender</h4><canvas id="chartGoalsByGender"></canvas><p class="chart-insight">Goal-setting is a strong point for both males and females, with a vast majority achieving the highest possible score.</p></div>
            </div>

            <h3 class="sub-section-title">Index Scores by Education Level</h3>
            <div class="grid grid-2-col">
                <div class="card"><h4 style="margin-top:0">Financial Literacy Index by Education</h4><canvas id="chartLiteracyByEducation"></canvas><p class="chart-insight">Undergraduates (UG) show slightly better financial literacy scores compared to 12th grade and Postgraduates (PG).</p></div>
                <div class="card"><h4 style="margin-top:0">Spending Habits Index by Education</h4><canvas id="chartSpendingByEducation"></canvas><p class="chart-insight">Undergraduates report the most disciplined spending habits. Postgraduates show a higher tendency towards less controlled spending.</p></div>
                <div class="card"><h4 style="margin-top:0">Savings & Investments Index by Education</h4><canvas id="chartSavingsByEducation"></canvas><p class="chart-insight">Undergraduates lead in savings and investment behaviors. Those in 12th grade have the highest proportion of low scores.</p></div>
                <div class="card"><h4 style="margin-top:0">Influence Index by Education</h4><canvas id="chartInfluenceByEducation"></canvas><p class="chart-insight">Influence from external factors is high across all education levels, particularly for Undergraduates.</p></div>
                <div class="card"><h4 style="margin-top:0">Financial Goal Index by Education</h4><canvas id="chartGoalsByEducation"></canvas><p class="chart-insight">Clear financial goal-setting is prevalent across all education levels, with Undergraduates showing the strongest performance.</p></div>
            </div>
            
            <h3 class="sub-section-title">Index Scores by Employment Status</h3>
            <div class="grid grid-2-col">
                <div class="card"><h4 style="margin-top:0">Financial Literacy Index by Employment</h4><canvas id="chartLiteracyByEmployment"></canvas><p class="chart-insight">Those who are employed demonstrate slightly better financial literacy than those who are still studying.</p></div>
                <div class="card"><h4 style="margin-top:0">Spending Habits Index by Employment</h4><canvas id="chartSpendingByEmployment"></canvas><p class="chart-insight">The employed group has more low scores, indicating that having an income may lead to less disciplined spending.</p></div>
                <div class="card"><h4 style="margin-top:0">Savings & Investments Index by Employment</h4><canvas id="chartSavingsByEmployment"></canvas><p class="chart-insight">The employed group shows stronger savings habits, likely due to having a steady source of funds.</p></div>
                <div class="card"><h4 style="margin-top:0">Influence Index by Employment</h4><canvas id="chartInfluenceByEmployment"></canvas><p class="chart-insight">The employed demographic appears more susceptible to external financial influences compared to students.</p></div>
                <div class="card"><h4 style="margin-top:0">Financial Goal Index by Employment</h4><canvas id="chartGoalsByEmployment"></canvas><p class="chart-insight">Both groups have strong financial goal-setting habits, though the employed group has a higher concentration of top scores.</p></div>
            </div>

            <h3 class="sub-section-title">Index Scores by Income Status</h3>
            <div class="grid grid-2-col">
                <div class="card"><h4 style="margin-top:0">Financial Literacy Index by Income</h4><canvas id="chartLiteracyByIncome"></canvas><p class="chart-insight">Those without an income surprisingly show slightly better literacy scores than those with an income.</p></div>
                <div class="card"><h4 style="margin-top:0">Spending Habits Index by Income</h4><canvas id="chartSpendingByIncome"></canvas><p class="chart-insight">Individuals without an income display more disciplined spending habits, which is logical as they have limited funds.</p></div>
                <div class="card"><h4 style="margin-top:0">Savings & Investments Index by Income</h4><canvas id="chartSavingsByIncome"></canvas><p class="chart-insight">Having an income is strongly correlated with better savings and investment habits.</p></div>
                <div class="card"><h4 style="margin-top:0">Influence Index by Income</h4><canvas id="chartInfluenceByIncome"></canvas><p class="chart-insight">Those with an income are more influenced by external factors in their financial decisions.</p></div>
                <div class="card"><h4 style="margin-top:0">Financial Goal Index by Income</h4><canvas id="chartGoalsByIncome"></canvas><p class="chart-insight">Both groups exhibit excellent goal-setting tendencies, with the majority achieving the highest score.</p></div>
            </div>
        `
    },
    'boxplot-analysis': {
        title: 'Gender-Based Index Boxplot Analysis',
        content: `
            <p class="instructions">This section provides a detailed look at the distribution of index scores, broken down by gender. Boxplots are used to visualize the range, median, and quartiles of the data, offering deeper insights into the financial behaviors and competencies of male and female respondents.</p>

            <h3 class="sub-section-title">Overall Score Distribution by Gender</h3>
            <div class="grid grid-2-col">
                <div class="card">
                    <h4 style="margin-top:0">Male Respondents: All Index Scores</h4>
                    <canvas id="chartBoxplotMaleAll"></canvas>
                    <p class="chart-insight">This chart shows the distribution of all five index scores for male respondents. Savings scores show the widest range, while Influence scores are the most concentrated.</p>
                </div>
                <div class="card">
                    <h4 style="margin-top:0">Female Respondents: All Index Scores</h4>
                    <canvas id="chartBoxplotFemaleAll"></canvas>
                    <p class="chart-insight">This chart shows the distribution of all five index scores for female respondents. Similar to males, savings scores are the most spread out, but literacy scores appear more concentrated in the lower range.</p>
                </div>
            </div>

            <h3 class="sub-section-title">Comparative Analysis: Male vs. Female</h3>
            <div class="grid grid-2-col">
                <div class="card">
                    <h4 style="margin-top:0">Financial Literacy Index: Male vs. Female</h4>
                    <canvas id="chartBoxplotLiteracyCompare"></canvas>
                    <p class="chart-insight">Both genders have a similar median score for literacy. However, the interquartile range for males is slightly wider, indicating more variability in their scores compared to females.</p>
                </div>
                <div class="card">
                    <h4 style="margin-top:0">Spending Habits Index: Male vs. Female</h4>
                    <canvas id="chartBoxplotSpendingCompare"></canvas>
                    <p class="chart-insight">Spending habits are very similar between genders, with nearly identical medians and ranges. This suggests gender is not a significant differentiator for spending discipline in this cohort.</p>
                </div>
                <div class="card">
                    <h4 style="margin-top:0">Savings & Investments Index: Male vs. Female</h4>
                    <canvas id="chartBoxplotSavingsCompare"></canvas>
                    <p class="chart-insight">Males show a slightly higher median and a wider distribution in savings scores, suggesting that while both genders save, males might have more high-achievers and low-achievers in this area.</p>
                </div>
                <div class="card">
                    <h4 style="margin-top:0">Influence Index: Male vs. Female</h4>
                    <canvas id="chartBoxplotInfluenceCompare"></canvas>
                    <p class="chart-insight">Both distributions are very tight and skewed towards the higher end, indicating that both males and females are similarly susceptible to external financial influences.</p>
                </div>
                 <div class="card">
                    <h4 style="margin-top:0">Financial Goal Index: Male vs. Female</h4>
                    <canvas id="chartBoxplotGoalsCompare"></canvas>
                    <p class="chart-insight">Goal-setting is strong for both genders. The median score is high for both, with a very tight distribution, showing consistent goal-oriented behavior across the board.</p>
                </div>
            </div>
        `
    },
    conclusion: {
        title: 'Final Synthesis & Recommendations',
        content: `
            <div class="card">
                <h4 style="margin-top:0">Key Insights & The "Aspirant Navigator" Persona</h4>
                <p class="small">The comprehensive data analysis paints a clear and compelling portrait of the modern youth's financial landscape. We can define this persona as the "Aspirant Navigator": a generation that is hopeful, goal-oriented, and eager to build wealth, but is navigating a complex financial world without a reliable map or sufficient fuel. <br><br>Their aspirations are evident in their high Financial Goal and Savings Index scores; they fundamentally want to succeed. However, their journey is hampered by two critical shortcomings revealed in this study: a significant deficit in foundational financial literacy (the lowest-scoring index) and a heavy reliance on informal, often unreliable, sources of information like social media and family. This creates a dangerous "Confidence vs. Competence" gap, where their belief in their ability to manage money outstrips their actual knowledge, leaving them vulnerable to poor decisions, market volatility, and financial products they don't fully understand. Furthermore, the data shows that while gaining an income boosts the capacity to save, it paradoxically correlates with a decline in spending discipline, highlighting a crucial learning gap in managing disposable income effectively.</p>
            </div>
            <div class="card">
                <h4 style="margin-top:0">Actionable Recommendations</h4>
                <p class="small">Based on this data-driven persona, we propose a multi-pronged strategy to bridge the gap between aspiration and capability:
                    <ol>
                        <li><strong>For Educational Institutions:</strong> A paradigm shift from theoretical economics to practical financial capability is essential. We recommend the integration of mandatory, life-skill modules focused on topics like "Digital Financial Safety & Scam Prevention," "Taxation Basics for First-time Earners (including Gig Work)," and "Understanding Credit vs. Debt." These modules should be interactive and case-study-based to resonate with a generation that learns by doing.</li>
                        <li><strong>For Financial Institutions:</strong> The high interest in learning (over 70%) represents a significant market opportunity. Banks and FinTech companies should move beyond being mere service providers to become educational partners. This can be achieved by developing "financial incubator" products: student-focused accounts with zero fees, integrated micro-investment platforms with educational content, and gamified tools that teach budgeting and saving principles through a user's actual transaction data.</li>
                        <li><strong>For Policymakers:</strong> The widespread lack of formal financial education calls for systemic intervention. We recommend the development of a national financial literacy standard for school-leavers. This can be supported by public awareness campaigns that demystify financial concepts and highlight the risks of relying solely on unverified social media advice. Incentivizing companies to provide financial wellness programs for their young employees could also foster positive habits early in their careers.</li>
                    </ol>
                </p>
            </div>
        `
    }
};


/* ==========================================================================
    DYNAMIC CHART & CONTENT RENDERING LOGIC
    ========================================================================== */

const createdCharts = new Set();
// **FIXED** Using Chart.js v2 global settings
Chart.defaults.global.defaultFontColor = 'rgba(224, 247, 250, 0.9)';
Chart.defaults.global.defaultFontFamily = "'Segoe UI', system-ui, Arial, sans-serif";


// --- DATA SIMULATION ---
function generateSampleData(n, mean, stddev, min, max) {
    const numbers = [];
    for (let i = 0; i < n; i++) {
        let u = 0, v = 0;
        while(u === 0) u = Math.random();
        while(v === 0) v = Math.random();
        let num = Math.sqrt( -2.0 * Math.log( u ) ) * Math.cos( 2.0 * Math.PI * v );
        num = num * stddev + mean;
        num = Math.max(min, Math.min(num, max));
        numbers.push(Math.round(num * 2) / 2);
    }
    return numbers;
}

function simulateRawScores() {
    const nMale = DATA.demographics.gender.Male;
    const nFemale = DATA.demographics.gender.Female;
    
    // **FIXED** Use gender-specific stats for simulation
    Object.keys(DATA.indexAnalysis.genderSpecificStats.male).forEach(key => {
        const stats = DATA.indexAnalysis.genderSpecificStats.male[key];
        DATA.indexAnalysis.rawScoresMale[key] = generateSampleData(nMale, stats.mean, stats.stddev, 0, stats.max);
    });

    Object.keys(DATA.indexAnalysis.genderSpecificStats.female).forEach(key => {
        const stats = DATA.indexAnalysis.genderSpecificStats.female[key];
        DATA.indexAnalysis.rawScoresFemale[key] = generateSampleData(nFemale, stats.mean, stats.stddev, 0, stats.max);
    });
}


// --- CHART CREATION ---
function generateColors(numColors) {
    const colors = [];
    const hueStart = Math.random() * 360; 
    const saturation = 75 + Math.random() * 20; 
    const lightness = 70 + Math.random() * 10; 
    const hueStep = 360 / (numColors > 1 ? numColors : 2); 

    for (let i = 0; i < numColors; i++) {
        const hue = (hueStart + i * hueStep) % 360;
        colors.push(`hsla(${hue}, ${saturation}%, ${lightness}%, 0.8)`);
    }
    return colors;
}

function createChart(canvasId, type, data, options = {}) {
    const canvas = document.getElementById(canvasId);
    if (!canvas || createdCharts.has(canvasId)) return;
    const ctx = canvas.getContext('2d');
    const colors = generateColors(Object.keys(data).length);
    
    const chartOptions = {
        responsive: true,
        maintainAspectRatio: false,
        legend: { display: (type === 'pie' || type === 'doughnut'), position: 'bottom', labels: { fontColor: 'rgba(224, 247, 250, 0.9)' } },
        tooltips: { backgroundColor: '#0d1a26', titleFontColor: '#00e5ff', bodyFontColor: '#e0f7fa', displayColors: false },
    };

    if (type === 'radar') {
        chartOptions.scale = { 
            angleLines: { color: 'rgba(224, 247, 250, 0.2)' }, 
            gridLines: { color: 'rgba(224, 247, 250, 0.2)' }, 
            pointLabels: { fontColor: 'rgba(224, 247, 250, 0.9)'}, 
            ticks: { backdropColor: 'rgba(13, 26, 38, 0.8)', fontColor: 'white', beginAtZero: true } 
        };
    } else if (type === 'bar' || type === 'horizontalBar' || type === 'line') {
        chartOptions.scales = {
            yAxes: [{ ticks: { beginAtZero: true, fontColor: 'rgba(224, 247, 250, 0.9)' }, gridLines: { color: 'rgba(0, 229, 255, 0.1)' } }],
            xAxes: [{ ticks: { fontColor: 'rgba(224, 247, 250, 0.9)' }, gridLines: { color: 'rgba(0, 229, 255, 0.1)' } }]
        };
    }

    new Chart(ctx, {
        type,
        data: {
            labels: Object.keys(data),
            datasets: [{ data: Object.values(data), backgroundColor: colors, borderColor: colors.map(c => c.replace('0.8', '1')), borderWidth: 1 }]
        },
        options: chartOptions
    });
    createdCharts.add(canvasId);
}

function createGroupedBarChart(canvasId, chartData) {
    const canvas = document.getElementById(canvasId);
    if (!canvas || createdCharts.has(canvasId)) return;
    const ctx = canvas.getContext('2d');
    const indexData = chartData.data;
    const scoreRanges = Object.keys(indexData);
    const colors = generateColors(scoreRanges.length);

    const datasets = scoreRanges.map((range, index) => ({
        label: `Score ${range.replace(/-/g, ' to ')}`,
        data: indexData[range],
        backgroundColor: colors[index],
        borderColor: colors[index].replace('0.8', '1'),
        borderWidth: 1
    }));

    new Chart(ctx, {
        type: 'bar',
        data: { labels: chartData.labels, datasets },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            legend: { position: 'bottom', labels: { fontColor: 'rgba(224, 247, 250, 0.9)' } },
            tooltips: { mode: 'index', backgroundColor: '#0d1a26', titleFontColor: '#00e5ff', bodyFontColor: '#e0f7fa' },
            scales: { 
                yAxes: [{ ticks: { beginAtZero: true, fontColor: 'rgba(224, 247, 250, 0.9)' }, gridLines: { color: 'rgba(0, 229, 255, 0.1)' } }],
                xAxes: [{ ticks: { fontColor: 'rgba(224, 247, 250, 0.9)' }, gridLines: { color: 'rgba(0, 229, 255, 0.1)' } }]
            }
        }
    });
    createdCharts.add(canvasId);
}

function createBoxPlotChart(canvasId, rawData, labels) {
    const canvas = document.getElementById(canvasId);
    if (!canvas || createdCharts.has(canvasId)) return;
    const ctx = canvas.getContext('2d');
    const data = labels.map(label => rawData[label.toLowerCase()]);
    const colors = generateColors(labels.length);

    new Chart(ctx, {
        type: 'boxplot',
        data: {
            labels: labels,
            datasets: [{
                label: 'Index Score Distributions',
                data: data,
                backgroundColor: colors.map(c => c.replace('0.8', '0.5')),
                borderColor: colors,
                borderWidth: 1,
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            legend: { display: false },
            scales: { 
                yAxes: [{ ticks: { fontColor: 'rgba(224, 247, 250, 0.9)' }, gridLines: { color: 'rgba(0, 229, 255, 0.1)' } }],
                xAxes: [{ ticks: { fontColor: 'rgba(224, 247, 250, 0.9)' }, gridLines: { color: 'rgba(0, 229, 255, 0.1)' } }]
            }
        }
    });
     createdCharts.add(canvasId);
}

function createComparativeBoxPlotChart(canvasId, indexName, maleData, femaleData) {
    const canvas = document.getElementById(canvasId);
    if (!canvas || createdCharts.has(canvasId)) return;
    const ctx = canvas.getContext('2d');
    const colors = generateColors(2);

    new Chart(ctx, {
        type: 'boxplot',
        data: {
            labels: [indexName],
            datasets: [
                {
                    label: 'Male',
                    data: [maleData],
                    backgroundColor: colors[0].replace('0.8', '0.5'),
                    borderColor: colors[0],
                    borderWidth: 1,
                },
                {
                    label: 'Female',
                    data: [femaleData],
                    backgroundColor: colors[1].replace('0.8', '0.5'),
                    borderColor: colors[1],
                    borderWidth: 1,
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            legend: { display: true, position: 'bottom', labels: { fontColor: 'rgba(224, 247, 250, 0.9)' } },
             scales: { 
                yAxes: [{ ticks: { fontColor: 'rgba(224, 247, 250, 0.9)' }, gridLines: { color: 'rgba(0, 229, 255, 0.1)' } }],
                xAxes: [{ ticks: { fontColor: 'rgba(224, 247, 250, 0.9)' }, gridLines: { color: 'rgba(0, 229, 255, 0.1)' } }]
            }
        }
    });
    createdCharts.add(canvasId);
}


function createTable(containerId, headers, data, title) {
    const container = document.getElementById(containerId);
    if (!container) return;
    let tableHTML = `<h4 style="margin-top:0">${title}</h4><table class="styled-table"><thead><tr>`;
    headers.forEach(header => tableHTML += `<th>${header}</th>`);
    tableHTML += `</tr></thead><tbody>`;
    data.forEach(row => {
        tableHTML += `<tr>`;
        Object.values(row).forEach(val => tableHTML += `<td>${typeof val === 'number' ? val.toFixed(3) : val}</td>`);
        tableHTML += `</tr>`;
    });
    tableHTML += `</tbody></table>`;
    container.innerHTML = tableHTML;
}

function initializeChartsForSection(sectionId) {
    const d = DATA; // shortcut
    switch(sectionId) {
        case 'demographics':
            Object.keys(d.demographics).forEach(key => createChart(`chart${key.charAt(0).toUpperCase() + key.slice(1)}`, (key === 'gender' ? 'pie' : 'bar'), d.demographics[key]));
            break;
        case 'financials':
             Object.keys(d.financials).forEach(key => {
                let type = 'bar';
                if (key === 'incomeSource') type = 'pie';
                if (key === 'spendingInfluence') type = 'radar';
                if (key === 'spendingCategories') type = 'doughnut';
                createChart(`chart${key.charAt(0).toUpperCase() + key.slice(1)}`, type, d.financials[key]);
            });
            break;
        case 'literacy-attitudes':
             Object.keys(d.literacyAttitudes).forEach(key => {
                 let type = 'bar';
                 if (['knowDiffSaveInvest', 'interestLearn'].includes(key)) type = 'pie';
                 if (key === 'attendedProgram') type = 'doughnut';
                 let chartType = type;
                 if (key === 'sources') chartType = 'horizontalBar';
                 createChart(`chart${key.charAt(0).toUpperCase() + key.slice(1)}`, chartType, d.literacyAttitudes[key]);
             });
            break;
        case 'investment':
             Object.keys(d.investment).forEach(key => {
                 let chartType = 'bar';
                 if (key === 'investBarriers') chartType = 'horizontalBar';
                 createChart(`chart${key.charAt(0).toUpperCase() + key.slice(1)}`, chartType, d.investment[key]);
             });
            break;
        case 'index-analysis':
            createTable('stats-table-container', ['Index Name', 'Mean', 'Mode', 'Median', 'Variance', 'Std Dev'], d.indexAnalysis.statisticalSummary, 'Statistical Summary of Indices');
            createTable('corr-table-container', ['Index Name', 'Correlation Value'], d.indexAnalysis.genderCorrelation, 'Gender Correlation');
            createChart('chartIndexMeans', 'bar', d.indexAnalysis.indexMeans);
            ['Age', 'Gender', 'Education', 'Employment', 'Income'].forEach(group => {
                const groupData = d.indexAnalysis[`by${group}`];
                ['literacy', 'spending', 'savings', 'influence', 'goals'].forEach(index => {
                    createGroupedBarChart(`chart${index.charAt(0).toUpperCase() + index.slice(1)}By${group}`, { labels: groupData.labels, data: groupData[index] });
                });
            });
            break;
        case 'boxplot-analysis':
            const indexLabels = ['Literacy', 'Spending', 'Savings', 'Influence', 'Goals'];
            createBoxPlotChart('chartBoxplotMaleAll', d.indexAnalysis.rawScoresMale, indexLabels);
            createBoxPlotChart('chartBoxplotFemaleAll', d.indexAnalysis.rawScoresFemale, indexLabels);
            createComparativeBoxPlotChart('chartBoxplotLiteracyCompare', 'Financial Literacy', d.indexAnalysis.rawScoresMale.literacy, d.indexAnalysis.rawScoresFemale.literacy);
            createComparativeBoxPlotChart('chartBoxplotSpendingCompare', 'Spending Habits', d.indexAnalysis.rawScoresMale.spending, d.indexAnalysis.rawScoresFemale.spending);
            createComparativeBoxPlotChart('chartBoxplotSavingsCompare', 'Savings & Investments', d.indexAnalysis.rawScoresMale.savings, d.indexAnalysis.rawScoresFemale.savings);
            createComparativeBoxPlotChart('chartBoxplotInfluenceCompare', 'Influence', d.indexAnalysis.rawScoresMale.influence, d.indexAnalysis.rawScoresFemale.influence);
            createComparativeBoxPlotChart('chartBoxplotGoalsCompare', 'Financial Goals', d.indexAnalysis.rawScoresMale.goals, d.indexAnalysis.rawScoresFemale.goals);
            break;
    }
}

function buildPage() {
    const container = document.querySelector('.container');
    container.innerHTML = ''; // Clear container
    Object.keys(SECTIONS).forEach(key => {
        const sectionInfo = SECTIONS[key];
        const section = document.createElement('section');
        section.id = key;
        section.className = 'card';
        section.style.display = 'none';
        section.innerHTML = `<h2 class="section-title">${sectionInfo.title}</h2>${sectionInfo.content}`;
        container.appendChild(section);
    });
}

document.addEventListener('DOMContentLoaded', () => {
    simulateRawScores(); // Generate the data for boxplots
    buildPage();
    document.getElementById('totalRespondents').textContent = `Based on ${DATA.totalRespondents} survey respondents.`;

    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            const targetId = e.currentTarget.getAttribute('data-target');
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            e.currentTarget.classList.add('active');
            
            document.querySelectorAll('.container > section').forEach(sec => sec.style.display = 'none');
            const targetElement = document.getElementById(targetId);
            if(targetElement) targetElement.style.display = 'block';
            
            initializeChartsForSection(targetId);
            window.scrollTo({top: 0, behavior: 'smooth'});
        });
    });

    document.querySelector('.tab-btn[data-target="overview"]').click();
});
</script>
</body>
</html>

